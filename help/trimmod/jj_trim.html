<html>

<head>
<script language="Javascript">
function slipInNewDest(cname){ 
  if ((navigator.appName == 'Microsoft Internet Explorer') && (navigator.appVersion.substring(0,1) == '2' )) {window.location = cname.toLowerCase()+".html";}
  else {window.document.f2.action=cname.toLowerCase()+".html";}
}
</script>

<title>jj_trim (Trim Model Toolbox)</title>
</head>

<body bgcolor="#f0f0f0">
<a name="137046">

<table border="0" width="100%" cellpadding="0" cellspacing="0">
  <tr>
    <td valign="baseline" bgcolor="#9bd0e0"><font size="+2">Trim Model Toolbox</font></td>
    <td valign="baseline" align="right" bgcolor="#9bd0e0"><form name="f2"
    onSubmit="slipInNewDest(f2.cmdname.value)">
      <p>&nbsp;&nbsp;<b>Go to function:</b> <input name="cmdname" type="text" size="12"></p>
    </form>
    </td>
    <td valign="baseline" align="right" bgcolor="#9bd0e0">&nbsp;&nbsp;&nbsp;&nbsp;</a><a
    href="../../search1.html" target="_top">Search</a>&nbsp;&nbsp;&nbsp;&nbsp;<a
    href="../../helpdesk.html" target="_top">Help Desk</a>&nbsp;</td>
  </tr>
</table>

<table border="0" width="100%" cellpadding="0" cellspacing="0">
  <tr>
    <td><font size="+4">jj_trim</font> </td>
    <td valign="baseline" align="right">&nbsp;&nbsp;&nbsp;<a href="#exmpl_sec"><font size="+1">Examples</font></a>&nbsp;&nbsp;&nbsp;<a
    href="#seeal_sec"><font size="+1">See Also</font></a></td>
  </tr>
</table>
<!-- FNAME:jj_trim -->

<p>Trim point determination of a nonlinear ordinary differential equation system
(helper function of <code><a href="trimmod.html">trimmod</a></code>)</p>

<p><font size="+2">Syntax</font> 

<ul>
  <p><code>[x_tr, u_tr, d_tr, y_tr] =&nbsp;jj_trim (sys, x, u, d, y, i_x, i_u, i_d, i_y, x_nam, u_nam,
  d_nam, y_nam)</code></p>
  <p><code>[x_tr, u_tr, d_tr, y_tr] = jj_trim (..., y_nam, del_x_max, del_u_max)</code></p>
  <p><code>[x_tr, u_tr, d_tr, y_tr] = jj_trim (..., del_u_max, del_x_lin,
  del_u_lin)</code></p>
  <p><code>[x_tr, u_tr, d_tr, y_tr] = jj_trim (..., del_u_lin, options)</code></p>
</ul>

<p><font size="+2">Description</font> </p>
<p><code>[x_tr, ...] = jj_trim (sys, ..., y_nam) </code>trims the system <code>sys</code>
towards an operating point defined by the elements of <code>x</code> (state
vector), <code>u</code> (input vector), <code>d</code> (derivative of the state
vector),&nbsp; and <code>y</code> (output vector).&nbsp;</p>
<p><code>i_x</code> and <code>i_u</code> define the indices of the so-called
trim variables, which are those states and inputs the trim algorithm has to find
the appropriate values for. Specified values of the trim variables are taken as
initial starting guesses for the iteration.&nbsp;</p>
<p><code>i_d</code> and <code>i_y</code> are the indices of the so-called trim
requirements, which the trim algorithm has to satisfy. The values of the other <code>d(i)</code>
and <code>y(i)</code> do not matter.</p>
<p><code>x_nam</code>, <code>u_nam</code>, <code>d_nam</code>, and <code>y_nam</code>
are cell arrays of the form <code>x_nam = {'state_1'; 'state_2'; ...}</code>
containing the names of the states, inputs, derivatives, and outputs. The names
can be chosen arbitrarily. They are used only to identify linear dependent trim
variables or trim requirements.</p>
<p>IMPORTANT:&nbsp;</p>
<ul>
  <li>There have to be as many trim variables as there are trim requirements.</li>
  <li>All vectors (and cell arrays) have to be column vectors.</li>
</ul>
<p><code>[x_tr, ...] = jj_trim (..., y_nam, del_x_max, del_u_max) </code>allows
the additional specification of maximum alterations of state and input during
one trim step. The lengths of <code>del_x_max</code> and <code>del_u_max</code>
are equal to those of <code>x</code> and <code>u</code> respectively. The
default values of <code>del_x_max</code> and <code>del_u_max</code> are <code>1e42</code>.</p>
<p><code>[x_tr, ...] = jj_trim (..., del_u_max, del_x_lin, del_u_lin) </code>allows
the additional specification of the state and input step size to be used for the
calculation of the Jacobi-matrix (sensitivity matrix) in the linearization
procedure. The default values of <code>del_x_lin</code> and <code>del_u_lin</code>
are <code>1e-6*(1 + abs(x))</code> and <code>1e-6*(1 + abs(u))</code>
respectively.</p>
<p><code>[x_tr, ...] = jj_trim (..., del_u_lin, options) </code>allows the
additional specification of the maximum number of iterations &quot;<code>options(1)</code>&quot;
(default: <code>42</code>) and the cost value &quot;<code>options(2)</code>&quot;
(default: <code>1e-9</code>) to be gained.</p>

<p><font size="+2">Algorithm</font></p>

<p>The algorithm used is described in detail in <code><a href="trimmod.html">trimmod</a></code>.</p>

<p>&nbsp;<a name="seeal_sec"></a><font size="+2">See Also</font> </p>

<p><code><a href="trimmod.html">trimmod</a>&nbsp; </code>Main trim function</p>
<code>

<p><a href="jj_lin.html">jj_lin</a>&nbsp;&nbsp; </code>Helper function, that
linearizes a subsystem of a Simulink system</p>

<code>

<p><a href="../simulink/ug/trim.html">trim</a>&nbsp;&nbsp;&nbsp;&nbsp; </code>The trim
function of the Mathworks</p>

<hr>

<p align="center"><br>
[<a href="../../helpdesk.html" target="_top">Help Desk</a>] <br>

</body>
</html>
